# üç™ Cookie Domain Issue

## üî¥ ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö

Cookies ‡∏ñ‡∏π‡∏Å set ‡∏ó‡∏µ‡πà domain `localhost` ‡πÅ‡∏ï‡πà request ‡πÑ‡∏õ‡∏ó‡∏µ‡πà `127.0.0.1:8000`

**Browser ‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤ `localhost` ‡πÅ‡∏•‡∏∞ `127.0.0.1` ‡πÄ‡∏õ‡πá‡∏ô domain ‡∏Ñ‡∏ô‡∏•‡∏∞‡∏ï‡∏±‡∏ß!**

‡∏î‡∏±‡∏á‡∏ô‡∏±‡πâ‡∏ô cookies ‡∏ó‡∏µ‡πà set ‡∏ó‡∏µ‡πà `localhost` ‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏Å‡∏±‡∏ö request ‡πÑ‡∏õ‡∏ó‡∏µ‡πà `127.0.0.1`

## ‚úÖ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡πÉ‡∏ä‡πâ `localhost` ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)

1. **Frontend**: ‡πÉ‡∏ä‡πâ `http://localhost:3000`
2. **Backend**: ‡πÉ‡∏ä‡πâ `http://localhost:8000`
3. **Environment Variable**: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ `REACT_APP_BASE_URL=http://localhost:8000/api`

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: ‡πÉ‡∏ä‡πâ `127.0.0.1` ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

1. **Frontend**: ‡πÉ‡∏ä‡πâ `http://127.0.0.1:3000`
2. **Backend**: ‡πÉ‡∏ä‡πâ `http://127.0.0.1:8000`
3. **Environment Variable**: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ `REACT_APP_BASE_URL=http://127.0.0.1:8000/api`

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 3: Backend ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Domain ‡πÉ‡∏ô Cookie (‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡πÑ‡∏î‡πâ)

Backend ‡∏Ñ‡∏ß‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ cookie domain ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö API domain:

```python
# Django settings.py
SESSION_COOKIE_DOMAIN = None  # ‡∏´‡∏£‡∏∑‡∏≠ '.localhost' ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö localhost
CSRF_COOKIE_DOMAIN = None

# ‡πÄ‡∏°‡∏∑‡πà‡∏≠ set cookie
response.set_cookie(
    'access',
    access_token,
    domain=None,  # ‡∏´‡∏£‡∏∑‡∏≠ '.localhost' ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö localhost
    httponly=True,
    samesite='Lax',
    max_age=3600
)
```

## üîç ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö

1. **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Cookies Domain:**
   - DevTools ‚Üí Application ‚Üí Cookies
   - ‡∏î‡∏π‡∏ß‡πà‡∏≤ cookies ‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà domain ‡∏≠‡∏∞‡πÑ‡∏£ (`localhost` ‡∏´‡∏£‡∏∑‡∏≠ `127.0.0.1`)

2. **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö API Base URL:**
   - ‡∏î‡∏π‡∏ß‡πà‡∏≤ frontend ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API ‡πÑ‡∏õ‡∏ó‡∏µ‡πà domain ‡∏≠‡∏∞‡πÑ‡∏£
   - ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö domain ‡∏Ç‡∏≠‡∏á cookies

3. **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Network Tab:**
   - ‡∏î‡∏π Request Headers ‚Üí Cookie
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ cookies ‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà

## üìù ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏

- `localhost` ‡πÅ‡∏•‡∏∞ `127.0.0.1` ‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô domain ‡∏Ñ‡∏ô‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡πÇ‡∏î‡∏¢ browser
- Cookies ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏Å‡∏±‡∏ö request ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠ domain ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô
- ‡πÉ‡∏ä‡πâ `localhost` ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏∞‡∏á‡πà‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö development

